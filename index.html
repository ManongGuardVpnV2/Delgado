
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AGNSA Cable TV</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.9/shaka-player.compiled.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.0/dist/hls.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>


  <style>
    body {
      background-image: url('https://wallpapers.com/images/hd/hacking-background-mmhim5v56nm98n6i.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      user-select: none;
      overflow-y: overlay; /* show scrollbar only when needed and overlayed */
      scrollbar-width: none; /* Firefox */

}

body::-webkit-scrollbar {
  width: 0px; /* Chrome, Safari */
  background: transparent;
}
.channel {
  padding: 8px 2px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  
}

.channel .flip-front {
  margin: 0 auto;
  padding: 2px;
  border-radius: 9999px;
  
}

.channel p {
  margin-top: 6px;
  font-size: 11px;
  font-weight: bold;
  text-align: center;
  white-space: normal;
  overflow: visible;
  text-overflow: unset;
  color: rgb(255, 255, 255);
  text-shadow:
    0 0 4px rgb(255, 234, 0),
    0 0 8px rgb(250, 91, 255),
    0 0 12px rgb(107, 214, 226);
  max-width: 5rem;
  word-break: break-word;
  line-height: 1.2;
  
}
.neon-text {
  color: rgb(31, 97, 229);
  text-shadow:
    0 0 3px rgb(255, 0, 0),
    0 0 6px rgb(4, 39, 1),
    0 0 10px rgb(7, 214, 214);
    
}
.rainbow-btn {
  background: linear-gradient(90deg, red, orange, rgb(245, 37, 231), green, blue, indigo, rgb(81, 0, 81));
  background-size: 400% 400%;
  animation: rainbowShift 3s linear infinite;
  color: white;
  border: none;
  box-shadow: 0 0 8px #0ff;
  transition: transform 0.2s;
}
.rainbow-btn:hover {
  transform: scale(1.1);
}

@keyframes rainbowShift {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}
  .rainbow-text {
      background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shine 4s linear infinite;
      background-size: 400% auto;
      text-shadow: 0 0 6px rgb(242, 226, 7), 0 0 12px #0ff;

    }
    @keyframes shine {
      0% { background-position: 0% }
      100% { background-position: 100% }
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.05); }
      
    }
    .pulse-text { animation: pulse 2s infinite; }
    .neon-text { text-shadow: 0 0 6px rgb(7, 241, 238), 0 0 12px rgb(222, 11, 11); }
    .channel.active .flip-front { box-shadow: 0 0 8px 3px #0ff; outline: 2px solid rgb(111, 255, 0); }
    .flip-card { perspective: 1000px; cursor: pointer; }
    .flip-inner { transition: transform 0.6s; transform-style: preserve-3d; }
    .flip-card.flipped .flip-inner { transform: rotateY(180deg); }
    .flip-front, .flip-back { backface-visibility: hidden; }
    .flip-back { transform: rotateY(180deg); background: #000; }
    .scroll-x::-webkit-scrollbar { height: 7px; }
    .scroll-x::-webkit-scrollbar-thumb {
      background: rgb(171, 3, 255);
      border-radius: 8px;
    }
    
    .scrollbar-hide::-webkit-scrollbar {
  display: none;
}
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE/Edge */
  scrollbar-width: none;     /* Firefox */
}
.mechanic-icon svg {
  filter: drop-shadow(0 0 2px #0ff) drop-shadow(0 0 6px #0ff);
  transition: transform 0.2s ease, filter 0.2s ease;
}
.mechanic-icon:hover svg {
  transform: rotate(10deg);
  filter: drop-shadow(0 0 4px #0ff) drop-shadow(0 0 10px #0ff);
  animation: spin 1s linear infinite;
}
.mechanic-icon svg {
  filter: drop-shadow(0 0 2px #0ff) drop-shadow(0 0 6px #0ff);
  transition: transform 0.2s ease, filter 0.2s ease;
}

.spin-gear {
  animation: spin 1.5s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
input[type="range"] {
  touch-action: pan-y;
  pointer-events: auto;
}
#qualityDropdown {
  min-width: 120px;
  background-color: rgba(0, 0, 0, 0.9);
  border: 1px solid #0ff;
  border-radius: 6px;
}
#qualityDropdown li {
  transition: background 0.2s ease;
}
#settingsDropdown {
  z-index: 9999;
}
/* Neon cyan glowing text with subtle flicker animation */
.neon-cyan-glow {
  color: #fbff00;
  text-shadow:
    0 0 5px #00ff6e,
    0 0 10px #bfff00,
    0 0 20px #00d0ff,
    0 0 30px #00b8ff,
    0 0 40px #9dff00,
    0 0 55px #0088ff,
    0 0 75px #ff0000;
  animation: neonFlicker 2.5s ease-in-out infinite alternate;
}

/* Flicker animation to mimic neon light flicker */
@keyframes neonFlicker {
  0%, 100% {
    text-shadow:
      0 0 5px #00fff7,
      0 0 10px #00e8ff,
      0 0 20px #00d0ff,
      0 0 30px #00b8ff,
      0 0 40px #00a0ff,
      0 0 55px #0088ff,
      0 0 75px #006fff;
    opacity: 1;
  }
  50% {
    text-shadow:
      0 0 10px #00fff7,
      0 0 20px #00e8ff,
      0 0 30px #00d0ff,
      0 0 40px #00b8ff,
      0 0 50px #00a0ff,
      0 0 65px #0088ff,
      0 0 90px #006fff;
    opacity: 0.85;
  }
}


  </style>
  <style>
  .neon-red   { color: #ff0606; text-shadow: 0 0 6px #4de705, 0 0 12px #f8f809, 0 0 16px #03f7ff; }
.neon-cyan { color: #00e1ff; text-shadow: 0 0 6px #000000, 0 0 12px #21fca1, 0 0 16px #00e1ff; }
.neon-green { color: #00ff99; text-shadow: 0 0 6px #00ff99, 0 0 12px #00ff99, 0 0 16px #00ff99; }
.neon-pink  { color: #ff77ff; text-shadow: 0 0 6px #ff77ff, 0 0 12px #ff77ff, 0 0 16px #ff77ff; }
.neon-yellow { color: #ffff66; text-shadow: 0 0 6px #1b1b01, 0 0 12px #ffff66, 0 0 16px #66ffb5; }
.neon-orange { color: #e98604; text-shadow: 0 0 6px #ffff66, 0 0 12px #510ddb, 0 0 16px #ffff66; }
.neon-purple { color: #b704e9; text-shadow: 0 0 6px #66ff8c, 0 0 12px #510ddb, 0 0 16px #dc089d; }
.neon-blue { color: #041fe9d7; text-shadow: 0 0 6px #f50828, 0 0 12px #0dcddb, 0 0 16px #0f050c; }


    #devToolsWarning {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: red;
      color: white;
      padding: 20px;
      font-size: 15px;
      font-weight: bold;
      border-radius: 10px;
      z-index: 99999;
    }

    #mainContent {
      display: block; /* Content is visible by default */
      text-align: center; /* Center text horizontally */
      font-size: 1rem; /* Adjust size as needed */
      background-color: rgba(0, 0, 0, 0.004); /* Add semi-transparent background */
      color: #ff0000; /* White text color */
      padding: 30px; /* Padding inside the content box */
      border-radius: 15px; /* Rounded corners */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); /* Shadow for better visibility */
    }

    #blockedContent {
      display: none; /* Hidden by default */
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #333;
      color: white;
      padding: 30px;
      font-size: 15px;
      border-radius: 10px;
      z-index: 9999;
      text-align: center;
    }
    
      

</style>

</head>
<body class="text-white font-sans min-h-screen overflow-x-hidden bg-black bg-opacity-50 pb-40">

  <header class="text-center py-4 text-3xl font-bold neon-red">AGNSA Cable TV</header>

  <div class="text-center mb-4">
    <span id="datetime" class="text-lg sm:text-xl font-semibold neon-cyan  font-mono"></span>
  </div>

  <audio id="fullscreenSound" src="\assest\exitfullscreen.mp3" preload="auto"></audio>
  

  <div class="relative max-w-4xl mx-auto px-4 mt-2">
    <div id="videoContainer" class="aspect-video bg-black rounded-xl overflow: visible !important; shadow-xl relative cursor-pointer">
      <video id="video" class="w-full h-full object-contain" autoplay playsinline preload="auto"></video>
      <div id="channelName" class="absolute top-2 left-2 text-sm font-bold rainbow-text pulse-text z-10"></div>
      
     <div id="videoControls"
  class="absolute bottom-0 left-0 right-0 bg-black/60 px-2 py-2 flex flex-col sm:flex-row flex-wrap items-center justify-between z-10 transition-opacity duration-500 opacity-100 gap-2">
  
  <!-- Left side: Play, LIVE, Seekbar -->
  <div class="flex items-center gap-2 w-full sm:w-auto flex-grow">
    <button id="playPauseBtn" class="rainbow-btn text-xl px-4 py-1 rounded-full">‚è∏Ô∏è</button>

    <div id="liveIndicator"
      class="flex items-center gap-1 text-red-500 text-xs font-bold animate-pulse whitespace-nowrap">
      <span class="w-2 h-2 bg-red-600 rounded-full animate-ping"></span> LIVE
    </div>

    <input type="range" id="seekBar" min="0" max="100" step="1"
      class="flex-grow h-2 appearance-none rounded-lg bg-pink-800/50 focus:outline-none touch-manipulation" />
  </div>

  <!-- Right side: Volume, Fullscreen, PiP -->
  <div class="flex items-center gap-3 w-full sm:w-auto justify-end sm:justify-start">
   <!-- Volume Icon + Slider -->
<div class="flex items-center gap-2">
  <button id="volumeIcon" class="neon-yellow">
    <svg xmlns="http://www.w3.org/2000/svg" id="volumeSvg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
      class="w-5 h-5">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M11 5L6 9H3v6h3l5 4V5zm4.5 1.5a6 6 0 010 11m2-13a9 9 0 010 17" />
    </svg>
  </button>
  <input type="range" id="volumeSlider" min="0" max="1" step="0.01"
    class="w-24 sm:w-28 accent-green-400 touch-manipulation" />
</div>
<div id="gearWrapper" class="relative">
  <button id="settingsBtn" class="text-cyan-400 text-xl mechanic-icon animate-spin hover:scale-110 transition-transform duration-300">
  ‚öôÔ∏è
</button>
  <div id="settingsDropdown"
    class="hidden absolute right-0 bottom-10 bg-black bg-opacity-80 text-sm rounded-lg p-2 space-y-1 z-50 shadow-lg">
    <button id="pipToggle" class="block w-full text-left hover:text-cyan-300">üóî PiP</button>
    <div id="qualityOptions" class="space-y-1 mt-2">
  <label class="block text-cyan-400 font-bold mb-1">Quality</label>
  <select id="qualitySelect" class="hidden">
  <option value="auto">Auto</option>
</select>
</div>
  </div>
</div>


    <button id="fullscreenBtn"
      class="rainbow-btn hover:text-cyan-200 text-xl transition-transform duration-300">
      <svg id="fullscreenGear" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
        stroke="currentColor" class="w-6 h-6 mx-auto drop-shadow-neon transition-all duration-300">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 3v2m0 14v2m7.071-11.071l-1.414 1.414M6.343 17.657l-1.414 1.414M21 12h-2M5 12H3m16.071 7.071l-1.414-1.414M6.343 6.343l-1.414-1.414" />
      </svg>
    </button>
  </div>
</div>
</div>
</div>

  <div id="channelCategories" class="mt-6 space-y-6 px-4"></div>
  

 <div id="devToolsWarning">Developer tools are disabled. Please close them to continue!</div>

  <div id="mainContent">
        <marquee><h1>Welcome to AGNSA Cable TV</h1></marquee>
    <marquee><p>This is the main content of the page.</p></marquee>
  </div>
  <div id="blockedContent">
    <h2>Content Blocked</h2>
    <p>Developer tools have been detected. The content is now blocked.</p>
  </div>



  <script>
     const CHANNEL_JSON_URL = 'https://gist.githubusercontent.com/ManongGuardVpnV2/3bf72c4b0f2ddd44bf433102548ca8b4/raw/0c2f84f8c42c2433bcb392418663b8aa9be25943/categorychannel.json';
    const player = new shaka.Player(document.getElementById('video'));
    const video = document.getElementById('video');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeIcon = document.getElementById('volumeIcon');
    const volumeSvg = document.getElementById('volumeSvg');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    const seekBar = document.getElementById('seekBar');
    const pipBtn = document.getElementById('pipToggle');
    const settingsBtn = document.getElementById('settingsBtn');
    const dropdown = document.getElementById('settingsDropdown');
    let dropdownVisible = false;

    let channels = [];
    let currentChannelIndex = -1;
    let currentFormat = ''; // 'dash' or 'hls'

    settingsBtn.addEventListener('click', () => {
      dropdownVisible = !dropdownVisible;
      dropdown.classList.toggle('hidden', !dropdownVisible);
    });

    // Optional: Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      const gearWrapper = document.getElementById('gearWrapper');
      if (!gearWrapper.contains(e.target)) {
        dropdown.classList.add('hidden');
        dropdownVisible = false;
      }
    });

   // Shaka Player config
player.configure({
  abr: { enabled: true },
  streaming: {
    bufferingGoal: 15,      // seconds of buffer to keep ahead
    rebufferingGoal: 5,     // seconds of buffer to resume after stall
    lowLatencyMode: false,  // set true if really want low latency but may cause stutter
    startAtSegmentBoundary: true,
    smallGapLimit: 0.5,
    jumpLargeGaps: true,
  },
  preferredVideoCodecs: ['avc1.640028', 'vp9'],
});

// HLS.js config
window.hls = new Hls({
  enableWorker: true,
  autoStartLoad: true,
  maxBufferLength: 30,
  maxMaxBufferLength: 60,
  liveSyncDuration: 3,
  liveMaxLatencyDuration: 15,
  lowLatencyMode: false,  // try false for smoother buffering
});


    // Fetch channels
    async function loadChannels() {
  try {
    const res = await fetch(CHANNEL_JSON_URL);
    channels = await res.json();
    renderChannelRows();

    // Load saved or first channel AFTER channels are loaded
    const savedIndex = parseInt(localStorage.getItem('lastChannelIndex'));
    if (!isNaN(savedIndex) && channels[savedIndex]) {
      const card = document.querySelector(`.channel[data-index="${savedIndex}"]`);
      if (card) {
        flipChannel(card, savedIndex);
        return;
      }
    }
    // fallback to first channel
    const firstCard = document.querySelector('.channel');
    if (firstCard) flipChannel(firstCard, 0);
  } catch (err) {
    console.error("‚ùå Failed to load channels:", err);
  }
}

    document.addEventListener('DOMContentLoaded', async () => {
      shaka.polyfill.installAll();
      player.addEventListener('error', e => console.error('Shaka error:', e.detail));
      loadChannels();

      // Load saved volume
const savedVolume = parseFloat(localStorage.getItem('savedVolume'));
if (!isNaN(savedVolume)) {
  video.volume = savedVolume;
  video.muted = savedVolume === 0;
  volumeSlider.value = savedVolume;
  updateVolumeIcon();
} else {
  // Default volume if no saved volume
  video.volume = 1;
  video.muted = false;
  volumeSlider.value = 1;
}



      const savedIndex = parseInt(localStorage.getItem('lastChannelIndex'));
if (!isNaN(savedIndex) && channels[savedIndex]) {
  const card = document.querySelector(`.channel[data-index="${savedIndex}"]`);
  if (card) flipChannel(card, savedIndex);
} else {
  // Fallback load first channel
  const firstCard = document.querySelector('.channel');
  if (firstCard) {
    flipChannel(firstCard, 0);
  }
}

    });

    // Render Channel List
    function renderChannelRows() {
      const container = document.getElementById('channelCategories');
      container.innerHTML = '';
      const grouped = {};

      channels.forEach(c => {
        const cat = c.category || 'Uncategorized';
        if (!grouped[cat]) grouped[cat] = [];
        grouped[cat].push(c);
      });

      for (const [cat, catChannels] of Object.entries(grouped)) {
        const neonClassMap = {
          'Sports': 'neon-cyan',
          'Music': 'neon-cyan',
          'News': 'neon-red',
          'Movies': 'neon-orange',
          'Kids': 'neon-pink',
          'Comedy': 'neon-yellow',
          'Documentary': 'neon-purple',
          'Local': 'neon-blue'
        };
        const neonClass = neonClassMap[cat] || 'neon-blue';

        const section = document.createElement('div');
        section.innerHTML = `
          <h2 class="text-xl font-bold mb-2 ${neonClass} pulse-text">${cat}</h2>
          <div class="scroll-x flex overflow-x-auto gap-4 py-2 px-1">
            ${catChannels.map(channel => `
              <div class="channel flip-card text-center flex-shrink-0 w-24 min-w-[6rem]" data-index="${channels.indexOf(channel)}">
                <div class="flip-inner w-full h-full relative">
                  <div class="flip-front aspect-square w-full rounded-full overflow-hidden shadow-lg">
                    <img src="${channel.logo}" alt="${channel.name}" class="w-full h-full object-cover rounded-full" />
                  </div>
                  <div class="flip-back aspect-square absolute inset-0 rounded-full flex items-center justify-center text-[10px] font-bold text-white neon-text">NOW<br>PLAYING</div>
                </div>
                <p class="mt-1 text-xs font-bold text-cyan-300 max-w-[6rem] break-words whitespace-normal text-center neon-text leading-tight">${channel.name}</p>
              </div>
            `).join('')}
          </div>
        `;
        container.appendChild(section);
      }

      document.querySelectorAll('.channel').forEach(card => {
        card.onclick = () => flipChannel(card, parseInt(card.dataset.index));
      });
    }

    // Flip Channel (switch channel)
    async function flipChannel(card, index) {
      if (index === currentChannelIndex) return; // Don't reload the same channel
      currentChannelIndex = index;

      const channel = channels[index];
      if (!channel) return;

      console.log('üé¨ Switching to', channel.name);


      // Update UI
      document.querySelectorAll('.channel').forEach(el =>
        el.classList.remove('active', 'flipped')
      );
      card.classList.add('active', 'flipped');
      document.getElementById('channelName').textContent = channel.name;

      // Save to localStorage
      localStorage.setItem('lastChannelIndex', index);

      // Always unmute
      video.muted = false;

      // DASH Stream
      if (channel.manifestUri?.endsWith('.mpd')) {
        if (currentFormat === 'hls' && window.hls) {
          window.hls.destroy();
          window.hls = null;
        }

        try {
  await player.unload();
  player.configure({
    drm: { clearKeys: channel.clearKey || {} },
    abr: { enabled: true },
    streaming: {
      bufferingGoal: 15,        // buffer 15 seconds ahead for smoothness
      rebufferingGoal: 5,       // 5 seconds buffer to resume after stall
      lowLatencyMode: false,    // set true if ultra-low latency needed, may cause stutter
      startAtSegmentBoundary: true,
      smallGapLimit: 0.5,
      jumpLargeGaps: true,
    },
    preferredVideoCodecs: ['avc1.640028', 'vp9'], // top-level config
  });
  await player.load(channel.manifestUri);
  video.muted = false;
  await video.play();
  currentFormat = 'dash';
  console.log('‚úÖ DASH playing:', channel.name);
} catch (err) {
  console.error('‚ùå DASH error:', err);
}
return;
}

// HLS Stream
if (channel.url?.endsWith('.m3u8')) {
  await player.unload(); // Unload Shaka if was used

  if (Hls.isSupported()) {
    if (window.hls) {
      window.hls.destroy();
      window.hls = null;
    }

    window.hls = new Hls({
      enableWorker: true,
      autoStartLoad: true,
      lowLatencyMode: false,       // set false for stable buffering, or true for very low latency
      maxBufferLength: 30,         // buffer 30 seconds ahead
      maxMaxBufferLength: 60,      // max buffer length 60 seconds
      liveSyncDuration: 3,         // sync live latency ~3 seconds
      liveMaxLatencyDuration: 15,  // max latency allowed 15 seconds
      backBufferLength: 30,        // keep 30 seconds of back buffer for smooth rewind
      maxFragLookUpTolerance: 0.25,
    });

    window.hls.attachMedia(video);
    window.hls.on(Hls.Events.MEDIA_ATTACHED, () => {
      window.hls.loadSource(channel.url);
    });

    window.hls.on(Hls.Events.MANIFEST_PARSED, () => {
      video.muted = false;
      video.play().catch(err => console.warn('HLS play error:', err));
    });

    currentFormat = 'hls';
    console.log('‚úÖ HLS playing:', channel.name);
  } else {
    // Native Safari fallback
    video.src = channel.url;
    video.muted = false;
    video.addEventListener('loadedmetadata', () => {
      video.play().catch(err => console.warn('Native HLS fail:', err));
    });
    alert('‚ùå HLS not supported in this browser');
  }
  return;
}
      console.warn('‚ùå Unsupported channel format:', channel.name);
    }


    // Apply saved or default volume
const savedVolume = parseFloat(localStorage.getItem('volume'));
volumeSlider.addEventListener('input', () => {
  const vol = parseFloat(volumeSlider.value);
  video.volume = Math.min(Math.max(vol, 0), 1);
  video.muted = vol === 0;
  localStorage.setItem('savedVolume', video.volume); // üîí Save volume
  updateVolumeIcon();
});




    document.getElementById('volumeIcon').addEventListener('click', () => {
    video.muted = !video.muted;
    if (video.muted) {
    volumeSlider.value = 0;
  } else {
    const savedVolume = parseFloat(localStorage.getItem('volume')) || 0.5;
    video.volume = savedVolume;
    volumeSlider.value = savedVolume;
  }
  updateVolumeIcon();
});



    function updateVolumeIcon() {
  const volumeSvg = document.getElementById('volumeSvg');
  if (video.muted || video.volume === 0) {
    volumeSvg.innerHTML = `
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M9 9L15 15M15 9L9 15M11 5L6 9H3v6h3l5 4V5" />
    `;
  } else if (video.volume < 0.5) {
    volumeSvg.innerHTML = `
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M11 5L6 9H3v6h3l5 4V5m4 4a3 3 0 000 6" />
    `;
  } else {
    volumeSvg.innerHTML = `
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M11 5L6 9H3v6h3l5 4V5m4.5 1.5a6 6 0 010 11m2-13a9 9 0 010 17" />
    `;
  }
}



      function updateActiveChannel(catIndex, chIndex) {
      // Clear previous active
      document.querySelectorAll('.channel').forEach(btn => btn.classList.remove('active'));
      // Set active channel button by category and index
      const category = document.getElementById('channelCategories').children[catIndex];
      if (!category) return;
      const grid = category.querySelector('div');
      if (!grid) return;
      const btns = grid.children;
      for (let i = 0; i < btns.length; i++) {
        btns[i].classList.remove('active');
      }
      btns[chIndex].classList.add('active');
    }

    // Function to toggle play and pause
    function togglePlayPause() {
      const video = document.getElementById('video');
      if (video.paused) {
        video.play();
        document.getElementById('playPauseBtn').textContent = "‚è∏Ô∏è"; // Update button to "Pause"
      } else {
        video.pause();
        document.getElementById('playPauseBtn').textContent = "‚ñ∂Ô∏è"; // Update button to "Play"
      }
    }

    // Add click event to video to toggle play/pause
    document.getElementById('video').addEventListener('click', togglePlayPause);
    // Play/Pause button functionality
    playPauseBtn.addEventListener('click', async (e) => {
      e.stopPropagation();
      try {
        if (video.paused || video.ended) {
          await video.play();
          playPauseBtn.textContent = '‚è∏Ô∏è';
        } else {
          video.pause();
          playPauseBtn.textContent = '‚ñ∂Ô∏è';
        }
      } catch (err) {
        console.warn("Button error:", err);
      }
    });

     // Function to enter fullscreen
    function enterFullscreen() {
      const videoContainer = document.getElementById('videoContainer');
      if (videoContainer.requestFullscreen) {
        videoContainer.requestFullscreen();
      } else if (videoContainer.mozRequestFullScreen) { // Firefox
        videoContainer.mozRequestFullScreen();
      } else if (videoContainer.webkitRequestFullscreen) { // Chrome, Safari
        videoContainer.webkitRequestFullscreen();
      } else if (videoContainer.msRequestFullscreen) { // IE/Edge
        videoContainer.msRequestFullscreen();
      }
    }

    // Function to exit fullscreen
    function exitFullscreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) { // Firefox
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) { // Chrome, Safari
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { // IE/Edge
        document.msExitFullscreen();
      }
    }

    // Toggle fullscreen on click
    document.getElementById('fullscreenBtn').addEventListener('click', function() {
      if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
        exitFullscreen();
      } else {
        enterFullscreen();
      }
    });

    // Toggle fullscreen on double-tap
    let lastTap = 0;
    document.getElementById('videoContainer').addEventListener('click', function(event) {
      const currentTap = new Date().getTime();
      const tapLength = currentTap - lastTap;
      if (tapLength < 500 && tapLength > 0) {
        if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
          exitFullscreen();
        } else {
          enterFullscreen();
        }
      }
      lastTap = currentTap;
    });

    // PiP toggle
    pipBtn.onclick = () => {
      if (document.pictureInPictureElement) {
        document.exitPictureInPicture();
      } else {
        video.requestPictureInPicture();
      }
    };

    // Time update for seek bar
    video.addEventListener('timeupdate', () => {
      if (!video.duration) return;
      seekBar.value = (100 / video.duration) * video.currentTime;
    });

    seekBar.addEventListener('input', () => {
  if (seekBar.disabled) return;  // no seeking on live
  video.currentTime = video.duration * (seekBar.value / 100);
});


    // Controls visibility on mouse move
    let controlTimeout;
    videoContainer.addEventListener('mousemove', () => {
      clearTimeout(controlTimeout);
      document.getElementById('videoControls').classList.remove('opacity-0');
      controlTimeout = setTimeout(() => document.getElementById('videoControls').classList.add('opacity-0'), 3000);
    });

    // Disable context menu and developer tools
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', (e) => {
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key))) {
        e.preventDefault();
        alert('Developer tools are disabled');
      }
    });

    document.addEventListener('selectstart', e => e.preventDefault());
    setInterval(() => console.clear(), 1000);


    // Detect and block dev tools opening based on window resize
    (function() {
      let devToolsOpen = false;

      // Added a flag to avoid detecting emulation mode
      let isEmulationMode = false;

      function detectDevTools() {
        const threshold = 160; // Threshold for dev tools detection
        const widthChange = window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold;

        // Check if emulation mode is active (change in window width/height)
        if (window.outerWidth < 1000 && window.outerHeight < 1000) {
          isEmulationMode = true;
        } else {
          isEmulationMode = false;
        }

        // Only show dev tools warning if we're not in emulation mode
        if (widthChange && !devToolsOpen && !isEmulationMode) {
          devToolsOpen = true;
          document.getElementById('devToolsWarning').style.display = 'block';  // Show warning
          document.getElementById('mainContent').style.display = 'none'; // Hide main content
          document.getElementById('blockedContent').style.display = 'block'; // Show blocked content
          
          // Redirect to a random page after 1 second
          setTimeout(function() {
            redirectToRandomPage();
          }, 1000);
        }

        if (!widthChange && devToolsOpen) {
          devToolsOpen = false;
          document.getElementById('devToolsWarning').style.display = 'none';  // Hide warning
          document.getElementById('mainContent').style.display = 'block'; // Show main content
          document.getElementById('blockedContent').style.display = 'none'; // Hide blocked content
        }
      }

      setInterval(detectDevTools, 1000); // Check every second

      // Block F12 and Ctrl+Shift+I keys
      window.addEventListener('keydown', function (e) {
        if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && e.keyCode === 73)) {
          e.preventDefault(); // Disable F12 and Ctrl+Shift+I
          alert('Developer Tools are disabled.');
        }
      });

      // Function to redirect to a random page
      function redirectToRandomPage() {
        const randomUrls = [
          "https://www.pornhub.com/", // Add your list of URLs here
        ];

        const randomIndex = Math.floor(Math.random() * randomUrls.length);
        const randomPage = randomUrls[randomIndex];
        window.location.href = randomPage;  // Redirect to the selected URL
      }
    })();

     function updateDateTime() {
      const now = new Date();
      document.getElementById('datetime').textContent = now.toLocaleString('en-US', {
        weekday: 'short', day: '2-digit', month: 'short', year: 'numeric',
        hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false,
      }).replace(',', ' ‚Äì');
    }

    setInterval(updateDateTime, 1000);
    updateDateTime();
    loadChannels();



  </script>
  

</body>
</html>
